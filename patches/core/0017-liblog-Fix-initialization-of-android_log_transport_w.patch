From 2d94bd3f415975f294b046ab43ea438f1dd924ce Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?S=C3=B6ren=20Tempel?= <soeren+git@soeren-tempel.net>
Date: Wed, 21 Aug 2019 20:01:26 +0200
Subject: [PATCH] liblog: Fix initialization of android_log_transport_write

---
 liblog/fake_writer.cpp  | 2 +-
 liblog/stderr_write.cpp | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/liblog/fake_writer.cpp b/liblog/fake_writer.cpp
index c0b0e69a5..29bcd4f75 100644
--- a/liblog/fake_writer.cpp
+++ b/liblog/fake_writer.cpp
@@ -33,8 +33,8 @@ static int logFds[(int)LOG_ID_MAX] = {-1, -1, -1, -1, -1, -1};
 
 struct android_log_transport_write fakeLoggerWrite = {
     .node = {&fakeLoggerWrite.node, &fakeLoggerWrite.node},
-    .context.priv = &logFds,
     .name = "fake",
+    .context = { .priv = &logFds },
     .available = NULL,
     .open = fakeOpen,
     .close = fakeClose,
diff --git a/liblog/stderr_write.cpp b/liblog/stderr_write.cpp
index e324a7c65..a32626099 100644
--- a/liblog/stderr_write.cpp
+++ b/liblog/stderr_write.cpp
@@ -56,8 +56,8 @@ struct stderrContext {
 
 struct android_log_transport_write stderrLoggerWrite = {
     .node = {&stderrLoggerWrite.node, &stderrLoggerWrite.node},
-    .context.priv = NULL,
     .name = "stderr",
+    .context = { .priv = NULL },
     .available = stderrAvailable,
     .open = stderrOpen,
     .close = stderrClose,
